var curProblem;
var problems = [];
var users = [];
var curUser;
var logined = false;
var defaultPass = 12345;
var cid = 791634; // contest id
var sid; // session id
var cmdId; // current number for added command(generated for dynamic creating of sortable elements)
var pathPref = atHome ? 'http://imcs.dvgu.ru/cats/main.pl?' : '/cats/main.pl?';
var resultsUrl = atHome ? 'http://imcs.dvgu.ru/cats/main.pl?f=rank_table_content;cid=' : '/cats/main.pl?f=rank_table_content;cid=';
var visited = []; // if tab have already been visited -- for proper tabs displaying
var arrow = [];
var contests;
var cmdClassToName = {
	'forward': '–ü—Ä—è–º–æ',
	'left': '–ù–∞–ª–µ–≤–æ',
	'right': '–ù–∞–ø—Ä–∞–≤–æ',
	'wait': '–ñ–¥–∞—Ç—å',
	'block': 'Block',
	'if': '–ï—Å–ª–∏',
	'ifelse': '–ï—Å–ª–∏...–ò–Ω–∞—á–µ',
	'while': '–ü–æ–∫–∞',
	'for': '–ü–æ–≤—Ç–æ—Ä',
	'funcdef': '–§—É–Ω–∫—Ü–∏—è'
};
var classes = ['forward', 'left', 'right', 'wait', 'block', 'if', 'ifelse', 'while', 'for', 'funcdef'];
var changeDir = {
	'forward':{
		'up': {dx: 0, dy: -1, curDir: 'up'},
		'down': {dx: 0, dy: 1, curDir: 'down'},
		'left':{dx: -1, dy: 0, curDir: 'left'},
		'right': {dx: 1, dy: 0, curDir: 'right'}
	},
	'left':{
		'up': {dx: 0, dy: 0, curDir: 'left'},
		'down': {dx: 0, dy: 0, curDir: 'right'},
		'left':{dx: 0, dy: 0, curDir: 'down'},
		'right': {dx: 0, dy: 0, curDir: 'up'}
	},
	'right':{
		'up': {dx: 0, dy: 0, curDir: 'right'},
		'down': {dx: 0, dy: 0, curDir: 'left'},
		'left':{dx: 0, dy: 0, curDir: 'up'},
		'right': {dx: 0, dy: 0, curDir: 'down'}
	}, 
	'wait':{
		'up': {dx: 0, dy: 0, curDir: 'up'},
		'down': {dx: 0, dy: 0, curDir: 'down'},
		'left':{dx: 0, dy: 0, curDir: 'left'},
		'right': {dx: 0, dy: 0, curDir: 'right'}
	},
	'behind':{
		'up': {dx: 0, dy: 1, curDir: 'up'},
		'down': {dx: 0, dy: -1, curDir: 'down'},
		'left':{dx: 1, dy: 0, curDir: 'left'},
		'right': {dx: -1, dy: 0, curDir: 'right'}
	}
	
}
var dirs = {'R': 'right', 'L': 'left', 'U': 'up', 'D': 'down'};
var maxx = 185;
var miny = 0;
var btnsPlay = ['play', 'next', 'prev'];
var btns = ['play', 'pause', 'stop', 'prev', 'next'];
var btnTitles = ['–ü—Ä–æ–∏–≥—Ä–∞—Ç—å', '–ü–∞—É–∑–∞', '–°—Ç–æ–ø', '–ü—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥', '–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥', '–í –∫–æ–Ω–µ—Ü'];
var buttonIconClasses = ['ui-icon-play', 'ui-icon-pause', 'ui-icon-stop', 'ui-icon-seek-prev', 'ui-icon-seek-next', 'ui-icon-seek-end'];
var c = 0;
var curDebugState;
var worker;
var lastWatchedIndex = [];
var watchList = [];
var codeareas = [];
var finalcode = [], 
	$gbl = [], 
	$loc = [], 
	$expr = [], 
	$scope = [], 
	nextline = [], 
	$scopename = [], 
	$scopestack = [];
	
var problemsData = [
{
	'code': "D", 
	'id': 792984, 
	'input_format': "<div>\n  –í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª.\n</div>",	
	'title': "–ó–∞–¥–∞—á–∞-1",
	'statement': "<div>\n<p>\n–í–∞—à–∞ –∑–∞–¥–∞—á–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã, –∑–∞—Ç—Ä–∞—Ç–∏–≤ –Ω–µ –±–æ–ª–µ–µ, —á–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤ —É—Å–ª–æ–≤–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥, –Ω–∞–±—Ä–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –æ—á–∫–æ–≤.</p>\n<p>–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –º–æ–Ω—Å—Ç—Ä–æ–º –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–æ–∏–≥—Ä—ã—à.</p> \n<p>–ó–∞ —Å–æ–±—Ä–∞–Ω–Ω—É—é –∑–≤–µ–∑–¥–æ—á–∫—É –ø–æ–ª—É—á–∞–µ—Ç–µ 20 –æ—á–∫–æ–≤.\n</p>\n</div>",
	'data': 
		{	
	"map": [
["#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#"],
["#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#"],
["#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#"],
["#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", "#", ".", ".", ".", ".", ".", "#", ".", ".", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#"],
["#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#"],
["#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", ".", ".", ".", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#"],
["#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", ".", "D", ".", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#"],
["#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", ".", ".", ".", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#"],
["#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#"],
["#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", ".", ".", "#", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#"],
["#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#"],
["#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#"],
["#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", "*", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#"],
["#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#"]],
	"specSymbols": [
		{
			"symbol": "*",
			"count": 1,
			"style": "star",
			"name": "Á‚ÂÁ‰‡",
			"action": "eat",
			"points": 25,
			"dLife": 0, 
			"zIndex": 2 
		}
	],
	"keys": [],
	"locks": [],
	"movingElements":[],
	"commands": ["forward", "left", "right", "wait"],
	"startLife": 1,
	"dLife": 0,
	"startPoints": 0,
	"maxCmdNum": 40
}
}];
var cmdAdded = false;
var addedCmds = [];
var prevCmd = undefined;
var stoppedLvl = 0;
var MAX_VALUE = 999999999999999;
var receiveStarted = false;
var elseStmt = undefined;
var maxStep = 100;
